var ReviewsFilters={filters_data:{},remote_data:{},ajax_url:MakeReviews.ajax_url,ajax_action:MakeReviews.ajax_action,post_id:MakeReviews.post_id,form_id:"#rf-filters-form",selected_class:".fl-filters-selected .fs-selected",selected:".fl-filters-selected",apply_button:"#filters-apply-btn",sort_apply_button:"#sort-apply-btn",no_results:".no-results",items:".reviews-items",item:".reviews-item",model:".reviews-item.reviews-model",sort_form_id:"#rl-sort-form",sortby:"most_recent",order:"desc",loading_class:"filters-loading"};!function(i,o){"use strict";o.update_records=function(){i(o.item+":visible").remove(),o.remote_data.length?(i(o.no_results).hide(),i("#count").html("("+o.remote_data.length+")"),i.each(o.remote_data,function(e,t){var s=i(o.model).clone();if(s.removeClass("reviews-model"),s.find(".ri-item-title").html(t.title),s.find(".ri-item-subtitle").html(t.subtitle),s.find(".ri-score-price").find(".ri-price span").html(t.price.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")),t.most_recent){var r=new Date(t.most_recent),a=r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear();s.find(".ri-date").html(a)}s.find(".ri-type").html(t.type),s.find(".ri-score-price").find(".ri-score span").html(t.score+"%"),t.buy_url&&(s.find(".ri-score-price").find(".ri-buy-now a").attr("href",t.buy_url),s.find(".ri-score-price").find(".ri-buy-now").show().css("display","flex")),s.find(".ri-feature-image a").css("background-image","url("+t.thumbnail+")"),s.find(".ri-link").attr("href",t.link),t.winner&&(s.find(".ri-item-meta").append(t.winner),s.addClass("winner")),i(o.items).append(s)})):i(o.no_results).show()},o.update=function(){sessionStorage.setItem("filters_data",JSON.stringify(o.filters_data)),o._update_selected_filter_list(),o._update_from_remote()},o.reset=function(){o.filters_data=[],o.update()},o.form_change=function(){var s={},e=i(o.form_id);i.each(e.serializeArray(),function(e,t){s[t.name]||(s[t.name]=[]),s[t.name].push(t.value)}),o.filters_data=s,o.update()},o.delete_selected_filter=function(){var e=i(this),t=e.attr("data-option"),s=e.attr("data-value");i('input[name="'+t+'"][value="'+s+'"]').attr("checked",!1);var r=o.filters_data[t].indexOf(s);o.filters_data[t].splice(r,1),o.filters_data[t].length||delete o.filters_data[t],o.update()},o.sort_change=function(){var e=!1;return e=!(!i(this).children().is("#recent")&&!i(this).children().is("#score")||!i(this).hasClass("dsc"))||!(!i(this).children().is("#az")&&!i(this).children().is("#price")||!i(this).hasClass("asc")),i(o.sort_form_id+" .rl-sort-choice").removeClass("asc"),i(o.sort_form_id+" .rl-sort-choice").removeClass("dsc"),0==e?i(this).children().is("#recent")||i(this).children().is("#score")?(i(this).removeClass("asc"),i(this).addClass("dsc"),o.order="dsc"):(i(this).removeClass("dsc"),i(this).addClass("asc"),o.order="asc"):i(this).children().is("#recent")||i(this).children().is("#score")?(i(this).removeClass("dsc"),i(this).addClass("asc"),o.order="asc"):(i(this).removeClass("asc"),i(this).addClass("dsc"),o.order="dsc"),o.sortby=i(this).find(":input").val(),sessionStorage.setItem("sort",o.sortby),o._update_from_remote(),!1},o._update_selected_filter_list=function(){var r=i(o.selected_class);r.empty();var e=function(e,t){var s=i('input[name="'+a+'"][value="'+t+'"]').parent().find("span").html();r.append(i("<button>").addClass("fs-selected-btn btn btn-link").attr("data-option",a).attr("data-value",t).html('<i class="fa fa-times"></i>'+s))};if(Object.keys(o.filters_data).length){for(var a in o.filters_data)o.filters_data.hasOwnProperty(a)&&i.each(o.filters_data[a],e);r.parent().show()}else r.parent().hide()},o._update_from_remote=function(){var e={action:"reviews-filters",post_id:o.post_id,filters:o.filters_data,sort:o.sortby,order:o.order};i("body").addClass(o.loading_class),i.post(o.ajax_url,e,function(e){e.success&&(o.remote_data=e.data,o.update_records()),i("body").removeClass(o.loading_class)})},o.load_stored_data=function(){var e=sessionStorage.getItem("filters_data");e&&(o.filters_data=JSON.parse(e));var t=sessionStorage.getItem("sort");t&&(o.sortby=t,i('input[name="sort"][value="'+t+'"]').attr("checked",!0))},i(document).ready(function(){i(o.sort_form_id+" span.rl-sort-choice").on("click",o.sort_change),i(o.form_id+" :input").on("change",o.form_change),i(o.form_id).on("reset",o.reset),i(o.selected_class).on("click","button",o.delete_selected_filter),i(o.apply_button).on("click",function(e){e.preventDefault(),e.stopPropagation(),o.update(),i("#show-filters-btn").click()}),i(o.sort_apply_button).on("click",function(e){e.preventDefault(),e.stopPropagation(),o.update()}),o.load_stored_data(),"desc"==o.order?i(o.sort_form_id+" ."+o.sortby+" .rl-sort-choice").addClass("dsc"):i(o.sort_form_id+" ."+o.sortby+" .rl-sort-choice").addClass("asc"),o.update()})}(jQuery,ReviewsFilters),jQuery(document).ready(function(t){t("#rf-filters-form").length&&t("#rf-filters-form")[0].reset(),t(".fl-filter .dropdown-toggle").dropdown(),t("#show-filters-btn").click(function(){"true"===t(this).attr("aria-expanded")?(t("html").removeClass("filters-open"),t(this).attr("aria-expanded","false")):(t("html").addClass("filters-open"),t(this).attr("aria-expanded","true"))}),t("#filters-cancel-btn").click(function(){t("html").removeClass("filters-open"),t("#show-filters-btn").attr("aria-expanded","false")}),t("#rf-reset-btn").click(function(){t("#rf-filters-form")[0].reset()}),t("#reviews-nav-btn").click(function(e){e.preventDefault(),t("html").toggleClass("review-nav-open")}),t("#virtual-placeholder").click(function(){t(this).fadeOut(),t(".virtual-tour .webrotate360").addClass("show")}),t("#compare").hasClass("active")&&t("#category-picker").click(function(e){e.preventDefault(),t("#category-dropdown").toggle()}),t("#category-dropdown").html()&&""!=t("#category-dropdown").html()||t("#category-picker").css("pointer-events","none")});
//# sourceMappingURL=index.min.js.map