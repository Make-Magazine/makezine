var ReviewsFilters={filters_data:{},remote_data:{},ajax_url:MakeReviews.ajax_url,ajax_action:MakeReviews.ajax_action,post_id:MakeReviews.post_id,form_id:"#rf-filters-form",selected_class:".fl-filters-selected .fs-selected",selected:".fl-filters-selected",apply_button:"#filters-apply-btn",sort_apply_button:"#sort-apply-btn",no_results:".no-results",items:".reviews-items",item:".reviews-item",model:".reviews-item.reviews-model",sort_form_id:"#rl-sort-form",sortby:"score",loading_class:"filters-loading"};!function($,e){"use strict";e.update_records=function(){$(e.item+":visible").remove(),e.remote_data.length?($(e.no_results).hide(),$.each(e.remote_data,function(t,a){var r=$(e.model).clone();r.removeClass("reviews-model"),r.find(".ri-item-title").html(a.title),r.find(".ri-price").find(".price").html(a.price),r.find(".ri-type").html(a.type),r.find(".ri-score").find(".score").html(a.score),r.find(".ri-feature-image").html(a.thumbnail),r.find(".ri-link").attr("href",a.link),a.winner&&(r.find(".ri-item-meta").html(a.winner),r.addClass("winner")),$(e.items).append(r)})):$(e.no_results).show()},e.update=function(){sessionStorage.setItem("filters_data",JSON.stringify(e.filters_data)),e._update_selected_filter_list(),e._update_from_remote()},e.reset=function(){e.filters_data=[],e.update()},e.form_change=function(){var t={},a=$(e.form_id);$.each(a.serializeArray(),function(e,a){t[a.name]||(t[a.name]=[]),t[a.name].push(a.value)}),e.filters_data=t,e.update()},e.delete_selected_filter=function(){var t=$(this),a=t.attr("data-option"),r=t.attr("data-value");$('input[name="'+a+'"][value="'+r+'"]').attr("checked",!1);var s=e.filters_data[a].indexOf(r);e.filters_data[a].splice(s,1),e.filters_data[a].length||delete e.filters_data[a],e.update()},e.sort_change=function(){e.sortby=$(this).val(),sessionStorage.setItem("sort",e.sortby),e._update_from_remote()},e._update_selected_filter_list=function(){var t=$(e.selected_class);t.empty();var a=function(e,a){var s=$('input[name="'+r+'"][value="'+a+'"]').parent().find("span").html();t.append($("<button>").addClass("fs-selected-btn btn btn-link").attr("data-option",r).attr("data-value",a).html('<i class="fa fa-times"></i>'+s))};if(Object.keys(e.filters_data).length){for(var r in e.filters_data)e.filters_data.hasOwnProperty(r)&&$.each(e.filters_data[r],a);t.parent().show()}else t.parent().hide()},e._update_from_remote=function(){var t={action:"reviews-filters",post_id:e.post_id,filters:e.filters_data,sort:e.sortby};$("body").addClass(e.loading_class),$.post(e.ajax_url,t,function(t){t.success&&(e.remote_data=t.data,e.update_records()),$("body").removeClass(e.loading_class)})},e.load_stored_data=function(){var t=sessionStorage.getItem("filters_data");t&&(e.filters_data=JSON.parse(t));var a=sessionStorage.getItem("sort");a&&(e.sortby=a,$('input[name="sort"][value="'+a+'"]').attr("checked",!0))},$(document).ready(function(){$(e.sort_form_id+" :input").on("change",e.sort_change),$(e.form_id+" :input").on("change",e.form_change),$(e.form_id).on("reset",e.reset),$(e.selected_class).on("click","button",e.delete_selected_filter),$(e.apply_button).on("click",function(t){t.preventDefault(),t.stopPropagation(),e.update(),$("#show-filters-btn").click()}),$(e.sort_apply_button).on("click",function(t){t.preventDefault(),t.stopPropagation(),e.update(),$("#show-sort-btn").click()}),e.load_stored_data(),e.update()})}(jQuery,ReviewsFilters),jQuery(document).ready(function($){$(".fl-filter .dropdown-toggle").dropdown(),$("#show-filters-btn").click(function(){"true"===$(this).attr("aria-expanded")?($("html").removeClass("filters-open"),$(this).attr("aria-expanded","false"),$("#more-filters").hide(),$("#more-filters-btn").html("More Filters").attr("aria-expanded","false")):($("html").addClass("filters-open"),$(this).attr("aria-expanded","true"))}),$("#filters-cancel-btn").click(function(){$("html").removeClass("filters-open"),$("#show-filters-btn").attr("aria-expanded","false"),$("#more-filters").hide(),$("#more-filters-btn").html("More Filters").attr("aria-expanded","false")}),$("#more-filters-btn").click(function(){"true"===$(this).attr("aria-expanded")?($("#more-filters").slideUp("fast"),$(this).html("More Filters"),$(this).attr("aria-expanded","false")):($("#more-filters").slideDown(),$(this).html("Less Filters"),$(this).attr("aria-expanded","true"))}),$("#rf-reset-btn").click(function(){$("#rf-filters-form")[0].reset()}),$("#show-sort-btn").click(function(){"true"===$(this).attr("aria-expanded")?($("html").removeClass("sort-open"),$(this).attr("aria-expanded","false")):($("html").addClass("sort-open"),$(this).attr("aria-expanded","true"))}),$("#sort-cancel-btn").click(function(){$("html").removeClass("sort-open"),$("#show-sort-btn").attr("aria-expanded","false")}),$("#reviews-nav-btn").click(function(e){e.preventDefault(),$("html").toggleClass("review-nav-open")}),$("#virtual-placeholder").click(function(){$(this).fadeOut(),$(".virtual-tour .webrotate360").addClass("show")})});
//# sourceMappingURL=./index.min.js.map